version: "3"

services:

  pygeoapi:
    image: geopython/pygeoapi

    container_name: pygeoapi

    restart: unless-stopped

    expose:
      - "80"

    env_file:
      - pygeoapi.env

    volumes:
      - ./local.config.yml:/pygeoapi/local.config.yml

    labels:
      - "traefik.enable=true"
      - "traefik.frontend.rule=Host:demo.pygeoapi.io;PathPrefix:/pygeoapi"
      - "traefik.backend=pygeoapi"
      - "traefik.frontend.priority=100"
      - "traefik.docker.network=pygeoapi-network"

networks:
  default:
    external:
      name: pygeoapi-network
